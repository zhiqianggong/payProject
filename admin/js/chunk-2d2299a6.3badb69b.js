(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2299a6"],{ddc3:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/payment_order"}}},[e._v("代付订单列表")])],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[t("el-card",{staticClass:"box-card reset-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("代付订单列表")])]),t("p",[t("el-date-picker",{staticStyle:{margin:"0 5px 5px 0"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH-mm-ss",format:"yyyy 年 MM 月 dd 日",size:"small","picker-options":e.pickerOptions},model:{value:e.data,callback:function(a){e.data=a},expression:"data"}}),t("el-input",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"商户ID","prefix-icon":"el-icon-search"},model:{value:e.searchTable.mchId,callback:function(a){e.$set(e.searchTable,"mchId",a)},expression:"searchTable.mchId"}}),t("el-input",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"账户名","prefix-icon":"el-icon-search"},model:{value:e.searchTable.accountName,callback:function(a){e.$set(e.searchTable,"accountName",a)},expression:"searchTable.accountName"}}),t("el-input",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"商户单号","prefix-icon":"el-icon-search"},model:{value:e.searchTable.mchOrderNo,callback:function(a){e.$set(e.searchTable,"mchOrderNo",a)},expression:"searchTable.mchOrderNo"}}),t("el-input",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"代付单号","prefix-icon":"el-icon-search"},model:{value:e.searchTable.agentpayOrderId,callback:function(a){e.$set(e.searchTable,"agentpayOrderId",a)},expression:"searchTable.agentpayOrderId"}}),t("el-input",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"转账单号","prefix-icon":"el-icon-search"},model:{value:e.searchTable.transOrderId,callback:function(a){e.$set(e.searchTable,"transOrderId",a)},expression:"searchTable.transOrderId"}}),t("el-select",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"代付渠道"},model:{value:e.searchTable.agentpayChannel,callback:function(a){e.$set(e.searchTable,"agentpayChannel",a)},expression:"searchTable.agentpayChannel"}},[t("el-option",{attrs:{label:"代付渠道",value:""}}),t("el-option",{attrs:{label:"商户后台",value:"1"}}),t("el-option",{attrs:{label:"API接口",value:"2"}})],1),t("el-select",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"状态"},model:{value:e.searchTable.status,callback:function(a){e.$set(e.searchTable,"status",a)},expression:"searchTable.status"}},[t("el-option",{attrs:{label:"状态",value:""}}),t("el-option",{attrs:{label:"待审核",value:"0"}}),t("el-option",{attrs:{label:"转账中",value:"1"}}),t("el-option",{attrs:{label:"转账成功",value:"2"}}),t("el-option",{attrs:{label:"转账失败",value:"3"}}),t("el-option",{attrs:{label:"审核失败",value:"4"}})],1),t("el-button",{staticClass:"green",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"info"},on:{click:e.searchAmount}},[t("i",{staticClass:"el-icon-search"}),e._v(" 搜索 ")])],1),t("el-alert",{staticClass:"reset-hint",attrs:{type:"success",closable:!1}},[t("span",{staticClass:"amount blue",staticStyle:{"margin-right":"10px"}},[t("span",[e._v("订单数")]),e._v(" ："+e._s(e.detailBox.allTotalCount?e.detailBox.allTotalCount:0)+" ")]),t("span",{staticClass:"amount green",staticStyle:{"margin-right":"10px"}},[t("span",[e._v("代付金额")]),e._v(" ：￥"+e._s(e.detailBox.allTotalAmount?e.detailBox.allTotalAmount/100:0)+" ")]),t("span",{staticClass:"amount yellow",staticStyle:{"margin-right":"10px"}},[t("span",[e._v("代付费用")]),e._v(" ：￥"+e._s(e.detailBox.allTotalFee?e.detailBox.allTotalFee/100:0)+" ")]),t("span",{staticClass:"amount red",staticStyle:{"margin-right":"10px"}},[t("span",[e._v("扣减金额")]),e._v(" ：￥"+e._s(e.detailBox.allTotalSubAmount?e.detailBox.allTotalSubAmount/100:0)+" ")])]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"mchId",label:"商户ID","min-width":"100"}}),t("el-table-column",{attrs:{prop:"agentpayOrderId",label:"代付单号","min-width":"220"}}),t("el-table-column",{attrs:{prop:"mchOrderNo",label:"商户单号","min-width":"240"}}),t("el-table-column",{attrs:{prop:"accountName",label:"账户名","min-width":"120"}}),t("el-table-column",{attrs:{prop:"accountNo",label:"账户","min-width":"120"}}),t("el-table-column",{attrs:{prop:"amount",label:"代付金额(元)","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e.amountFormat(a.row.amount)))]}}])}),t("el-table-column",{attrs:{prop:"fee",label:"手续费(元)",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(e.amountFormat(a.row.fee)))]}}])}),t("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("typeFilter")(a.row.status,e.typeBox)))])]}}])}),t("el-table-column",{attrs:{prop:"agentpayChannel",label:"代付渠道","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(1==a.row.agentpayChannel?"商户后台":"API接口"))])]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.getLocalTime(a.row.createTime)))])]}}])}),t("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"操作","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticClass:"reset-button green",attrs:{size:"warning"},on:{click:function(t){return e.searchDetail(a.row)}}},[e._v("查看")]),t("el-button",{staticClass:"reset-button green",attrs:{size:"warning"},on:{click:function(t){return e.top(a.row)}}},[e._v("上游结果")]),t("el-button",{staticClass:"reset-button green",attrs:{size:"warning"},on:{click:function(t){return e.addOrderDia(a.row)}}},[e._v("补单")])]}}])})],1),t("el-pagination",{staticClass:"paginationStyle",attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),t("el-dialog",{attrs:{title:"代付补单",visible:e.dialogVisible,width:"200","before-close":e.handleClose},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.modifyDetail,"status-icon":"","label-width":"100px"}},[t("el-form-item",{attrs:{label:"状态修改为"}},[t("el-radio-group",{model:{value:e.modifyDetail.reissueStatus,callback:function(a){e.$set(e.modifyDetail,"reissueStatus",a)},expression:"modifyDetail.reissueStatus"}},[t("el-radio",{attrs:{border:"",label:"2"}},[e._v("成功")]),t("el-radio",{attrs:{border:"",label:"3"}},[e._v("失败")])],1)],1),t("el-form-item",{attrs:{label:"是否发通知"}},[t("el-radio-group",{model:{value:e.modifyDetail.isNotifyMch,callback:function(a){e.$set(e.modifyDetail,"isNotifyMch",a)},expression:"modifyDetail.isNotifyMch"}},[t("el-radio",{attrs:{border:"",label:"true"}},[e._v("发送")]),t("el-radio",{attrs:{border:"",label:"false"}},[e._v("不发")])],1)],1),t("el-form-item",{attrs:{label:"超级密码",prop:"newPass"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入超级密码","show-password":""},model:{value:e.modifyDetail.password,callback:function(a){e.$set(e.modifyDetail,"password",a)},expression:"modifyDetail.password"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认补单")])],1)],1)],1)},l=[],r=(t("4de4"),t("b0c0"),{data:function(){return{tableData:[],currentPage:1,pagesize:10,mchId:null,pageTotal:null,searchTable:{accountName:"",agentpayChannel:"",agentpayOrderId:"",createTimeEnd:"",createTimeStart:"",mchId:"",mchOrderNo:"",status:"",transOrderId:""},modifyDetail:{agentpayOrderId:"",isNotifyMch:"true",password:"",reissueStatus:""},dialogVisible:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]},search:"",data:[],typeBox:[{key:0,name:"待审核"},{key:1,name:"转账中"},{key:2,name:"转账成功"},{key:3,name:"转账失败"},{key:4,name:"审核失败"}],detailBox:[]}},filters:{typeFilter:function(e,a){var t=a.filter((function(a){if(a.key==e)return a.name}));return t[0].name}},methods:{addOrderDia:function(e){this.modifyDetail.agentpayOrderId=e.agentpayOrderId,this.modifyDetail.reissueStatus=e.status,this.dialogVisible=!0},getDetail:function(){var e=this;this.axios({method:"post",url:"/api/agentpay/count",data:{body:{},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(a){e.loading=!1,200==a.data.code?e.detailBox=a.data.body:e.messageInfo(a)})).catch((function(e){console.log(e)}))},submit:function(){var e=this;this.axios({method:"post",url:"/api/agentpay/reissue",data:{body:{agentpayOrderId:this.modifyDetail.agentpayOrderId,isNotifyMch:this.modifyDetail.isNotifyMch,password:this.modifyDetail.password,reissueStatus:this.modifyDetail.reissueStatus},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(a){e.messageInfo(a),200==a.data.code&&(e.modifyDetail={agentpayOrderId:"",isNotifyMch:"true",password:"",reissueStatus:""})})).catch((function(e){console.log(e)}))},handleClose:function(e){e(),this.modifyDetail={agentpayOrderId:"",isNotifyMch:"true",password:"",reissueStatus:""}},handleSizeChange:function(e){this.pagesize=e,this.getTableData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableData()},getTableData:function(){var e=this;this.loading=!0,this.axios({method:"post",url:"/api/agentpay/list",data:{body:{accountName:this.searchTable.accountName?this.searchTable.accountName:null,agentpayChannel:this.searchTable.agentpayChannel?this.searchTable.agentpayChannel:null,agentpayOrderId:this.searchTable.agentpayOrderId?this.searchTable.agentpayOrderId:null,mchId:this.searchTable.mchId?this.searchTable.mchId:null,mchOrderNo:this.searchTable.mchOrderNo?this.searchTable.mchOrderNo:null,status:this.searchTable.status?this.searchTable.status:null,transOrderId:this.searchTable.transOrderId?this.searchTable.transOrderId:null,pageIndex:this.currentPage,pageSize:this.pagesize,createTimeEnd:this.data[1]?this.data[1]:null,createTimeStart:this.data[0]?this.data[0]:null},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(a){e.loading=!1,200==a.data.code?(console.log(a.data.body.agentPayRecordLists),e.tableData=a.data.body.agentPayRecordLists,e.pageTotal=a.data.body.count):e.messageInfo(a)})).catch((function(e){console.log(e)}))},searchAmount:function(){this.currentPage=1,this.getTableData()},searchDetail:function(e){this.$router.push({name:"telephone_detail",query:{id:e.agentpayOrderId}})},top:function(e){var a=this;this.axios({method:"post",url:"/api/agentpay/trans_query",data:{body:{transOrderId:e.transOrderId},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(e){200==e.data.code?a.$message({showClose:!0,message:e.data.message,type:"success"}):a.$message({showClose:!0,message:e.data.message,type:"warning"})})).catch((function(e){console.log(e)}))}},created:function(){this.getTableData(),this.getDetail()},mounted:function(){var e=this.$refs.table.$refs.bodyWrapper;this.mouseEventFun(e)}}),i=r,n=t("2877"),o=Object(n["a"])(i,s,l,!1,null,null,null);a["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d2299a6.3badb69b.js.map