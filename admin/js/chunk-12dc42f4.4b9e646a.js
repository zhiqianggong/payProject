(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12dc42f4"],{"159b":function(e,t,a){var s=a("da84"),o=a("fdbc"),i=a("17c2"),n=a("9112");for(var r in o){var l=s[r],c=l&&l.prototype;if(c&&c.forEach!==i)try{n(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(e,t,a){"use strict";var s=a("b727").forEach,o=a("a640"),i=a("ae40"),n=o("forEach"),r=i("forEach");e.exports=n&&r?[].forEach:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}},"2bce":function(e,t,a){},"386c":function(e,t,a){"use strict";var s=a("2bce"),o=a.n(s);o.a},4160:function(e,t,a){"use strict";var s=a("23e7"),o=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},edae:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/user_list"}}},[e._v("角色管理")])],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-card",{staticClass:"box-card reset-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("角色管理")])]),a("p",[a("el-button",{staticClass:"green",staticStyle:{"margin-left":"10px"},attrs:{type:"success",size:"small"},on:{click:function(t){e.dialogRolu=!0}}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增 ")]),a("el-button",{staticClass:"red",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"info"},on:{click:e.deleteUser}},[e._v("删除")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"roleId",label:"角色ID","min-width":"100"}}),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称","min-width":"120"}}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"操作","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"reset-button green",attrs:{type:"success"},on:{click:function(a){return e.rolu(t.$index,t.row)}}},[e._v("分配权限")]),a("el-button",{staticClass:"reset-button green",attrs:{type:"success"},on:{click:function(a){return e.modifyUser(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"reset-button red",attrs:{type:"success"},on:{click:function(a){return e.deleteCurUser(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"paginationStyle",attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新建角色",visible:e.dialogRolu,"min-width":"250px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogRolu=t}}},[a("el-row",{attrs:{gutter:10}},[a("el-form",[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-form-item",{attrs:{label:"角色名","label-width":"130px"}},[a("el-input",{attrs:{placeholder:"请输入角色名"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.roleSubmit}},[e._v("保存")]),a("el-button",{on:{click:e.closeDia}},[e._v("取 消")])],1)],1)],1)},o=[],i=(a("4160"),a("159b"),{data:function(){return{addMec:!1,tableData:[],currentPage:1,pagesize:10,pageTotal:null,mchId:"",changeRolu:{},dialogRolu:!1,isAdd:"",amountTitle:"",amountDetailBox:{balance:""},roleName:"",selectUserList:"",manageMap:null}},methods:{deleteCurUser:function(e){console.log(e),this.selectUserList=e.roleId+",",this.deleteUser()},deleteUser:function(){var e=this;""!=this.selectUserList?this.axios({method:"post",url:"/api/sys/role/delete",data:{body:{roleIds:this.selectUserList.substring(0,this.selectUserList.length-1)},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.messageInfo(t),200==t.data.code&&e.getTableData()})).catch((function(e){console.log(e)})):this.$message({message:"请勾选需要删除的用户",type:"warning"})},handleSelectionChange:function(e){var t=this;e.length>0&&e.forEach((function(e){t.selectUserList+=e.roleId+","}))},handleSizeChange:function(e){this.pagesize=e,this.getTableData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableData()},getTableData:function(){var e=this;this.loading=!0,this.axios({method:"post",url:"/api/sys/role/list",data:{body:{pageIndex:this.currentPage,pageSize:this.pagesize},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.loading=!1,200==t.data.code?(e.tableData=t.data.body,e.pageTotal=t.data.body.count):e.messageInfo(t)})).catch((function(e){console.log(e)}))},searchMchid:function(){this.currentPage=1,this.pagesize=10,this.getTableData()},changeSwitch:function(e){var t=this;this.axios({method:"post",url:"/api/sys/user/update",data:{body:{userId:e.userId,status:e.status},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(e){t.messageInfo(e),200==e.data.code&&t.getTableData()})).catch((function(e){console.log(e)}))},handleClose:function(e){this.roleName="",e()},modifyUser:function(e,t){this.$router.push({name:"change_role",query:{id:t.roleId}})},searchRole:function(e){var t=this;this.userId=e.userId,this.axios({method:"post",url:"/api/sys/user/user_role_view",data:{body:{userId:e.userId},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(e){if(200==e.data.code){if(e.data.body)for(var a=0;a<e.data.body.length;a++)1==e.data.body[a].checked?e.data.body[a].checked=!0:e.data.body[a].checked=!1;t.manageMap=e.data.body}else t.messageInfo(e)})).catch((function(e){console.log(e)}))},roleSubmit:function(){var e=this;this.axios({method:"post",url:"/api/sys/role/add",data:{body:{roleName:this.roleName},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.messageInfo(t),200==t.data.code&&(e.dialogRolu=!1,e.getTableData())})).catch((function(e){console.log(e)}))},closeDia:function(){this.dialogRolu=!1,this.roleName=""},rolu:function(e,t){this.$router.push({name:"authority_manage",query:{id:t.roleId}})}},created:function(){this.getTableData()},mounted:function(){var e=this.$refs.table.$refs.bodyWrapper;this.mouseEventFun(e)}}),n=i,r=(a("386c"),a("2877")),l=Object(r["a"])(n,s,o,!1,null,null,null);t["default"]=l.exports},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-12dc42f4.4b9e646a.js.map