(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b5d67"],{"1b33":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/payOrder"}}},[e._v("支付订单")])],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-card",{staticClass:"box-card reset-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("支付订单")])]),a("p",[a("el-date-picker",{staticStyle:{margin:"0 5px 5px 0"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH-mm-ss",format:"yyyy 年 MM 月 dd 日",size:"small","picker-options":e.pickerOptions},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}}),a("el-input",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"商户ID","prefix-icon":"el-icon-search"},model:{value:e.searchTable.mchId,callback:function(t){e.$set(e.searchTable,"mchId",t)},expression:"searchTable.mchId"}}),a("el-input",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"支付订单号","prefix-icon":"el-icon-search"},model:{value:e.searchTable.payOrderId,callback:function(t){e.$set(e.searchTable,"payOrderId",t)},expression:"searchTable.payOrderId"}}),a("el-input",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"商户订单号","prefix-icon":"el-icon-search"},model:{value:e.searchTable.mchOrderNo,callback:function(t){e.$set(e.searchTable,"mchOrderNo",t)},expression:"searchTable.mchOrderNo"}}),a("el-select",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"支付产品"},model:{value:e.searchTable.productId,callback:function(t){e.$set(e.searchTable,"productId",t)},expression:"searchTable.productId"}},[a("el-option",{attrs:{label:"支付产品",value:""}}),a("el-option",{attrs:{label:"数字货币",value:"5000"}}),a("el-option",{attrs:{label:"支付宝话费wap",value:"6003"}}),a("el-option",{attrs:{label:"京东支付",value:"7000"}}),a("el-option",{attrs:{label:"微信H5",value:"8001"}}),a("el-option",{attrs:{label:"微信wap",value:"8002"}}),a("el-option",{attrs:{label:"微信话费",value:"8003"}}),a("el-option",{attrs:{label:"QQ支付",value:"8005"}})],1),a("el-select",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"产品类型"},model:{value:e.searchTable.productType,callback:function(t){e.$set(e.searchTable,"productType",t)},expression:"searchTable.productType"}},[a("el-option",{attrs:{label:"产品类型",value:""}}),a("el-option",{attrs:{label:"收款",value:"1"}}),a("el-option",{attrs:{label:"充值",value:"2"}})],1),a("el-select",{staticStyle:{width:"150px",margin:"0 5px 5px 0"},attrs:{size:"small",placeholder:"订单状态"},model:{value:e.searchTable.status,callback:function(t){e.$set(e.searchTable,"status",t)},expression:"searchTable.status"}},[a("el-option",{attrs:{label:"订单状态",value:""}}),a("el-option",{attrs:{label:"订单生成",value:"0"}}),a("el-option",{attrs:{label:"支付中",value:"1"}}),a("el-option",{attrs:{label:"支付成功",value:"2"}}),a("el-option",{attrs:{label:"支付失败",value:"3"}}),a("el-option",{attrs:{label:"处理完成",value:"4"}}),a("el-option",{attrs:{label:"已退款",value:"5"}})],1),a("el-button",{staticClass:"green",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"info"},on:{click:e.searchAmount}},[a("i",{staticClass:"el-icon-search"}),e._v(" 搜索 ")])],1),a("el-alert",{staticClass:"reset-hint",attrs:{type:"success",closable:!1}},[a("span",{staticClass:"amount blue",staticStyle:{"margin-right":"10px"}},[a("span",[e._v("提交订单数")]),e._v("："+e._s(e.detailBox.failTotalCount?e.detailBox.failTotalCount:0)+" ")]),a("span",{staticClass:"amount green",staticStyle:{"margin-right":"10px"}},[a("span",[e._v("已付订单数")]),e._v("："+e._s(e.detailBox.successTotalCount?e.detailBox.successTotalCount:0)+" ")]),a("span",{staticClass:"amount red",staticStyle:{"margin-right":"10px"}},[a("span",[e._v("未付订单数")]),e._v("："+e._s(e.detailBox.failTotalCount?e.detailBox.failTotalCount:0)+" ")])]),a("el-alert",{staticClass:"reset-hint",attrs:{type:"success",closable:!1}},[a("span",{staticClass:"amount blue",staticStyle:{"margin-right":"10px"}},[a("span",[e._v("订单总金额")]),e._v("：￥"+e._s(e.detailBox.allTotalAmount?e.detailBox.allTotalAmount/100:0))]),a("span",{staticClass:"amount green",staticStyle:{"margin-right":"10px"}},[a("span",[e._v("已付总金额")]),e._v("：￥"+e._s(e.detailBox.successTotalAmount?e.detailBox.successTotalAmount/100:0))]),a("span",{staticClass:"amount red",staticStyle:{"margin-right":"10px"}},[a("span",[e._v("未付总金额")]),e._v("：￥"+e._s(e.detailBox.failTotalAmount?e.detailBox.failTotalAmount/100:0))])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"mchId",label:"商户id","min-width":"100"}}),a("el-table-column",{attrs:{prop:"mchOrderNo",label:"商户单号","min-width":"220"}}),a("el-table-column",{attrs:{prop:"payOrderId",label:"支付单号","min-width":"220"}}),a("el-table-column",{attrs:{prop:"amount",label:"支付金额","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.amountFormat(t.row.amount))+" ")]}}])}),a("el-table-column",{attrs:{prop:"productType",label:"产品类型","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.productType?"收款":"充值"))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:"color:"+e.typeBox[t.row.status].color},[e._v(e._s(e._f("typeFilter")(t.row.status,e.typeBox)))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getLocalTime(t.row.createTime)))])]}}])}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"操作","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"reset-button green",attrs:{size:"warning"},on:{click:function(a){return e.searchDetail(t.row)}}},[e._v("查看")]),a("el-button",{class:3==t.row.status||0==t.row.status?"reset-button":"reset-button yellow",attrs:{size:"warning",disabled:3==t.row.status||0==t.row.status},on:{click:function(a){return e.order(t.row)}}},[e._v("补单")])]}}])})],1),a("el-pagination",{staticClass:"paginationStyle",attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"确认补单，请输入超级密码",visible:e.orderDialog,"before-close":e.handleClose,"min-width":"300px"},on:{"update:visible":function(t){e.orderDialog=t}}},[a("el-row",{attrs:{gutter:10}},[a("el-form",[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-form-item",{attrs:{label:"超级密码","label-width":"100px"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.supPassword,callback:function(t){e.supPassword=t},expression:"supPassword"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitOrder}},[e._v("提 交")])],1)],1)],1)},l=[],r=(a("4de4"),a("b0c0"),{data:function(){return{orderDialog:!1,supPassword:"",data:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},tableData:[],currentPage:1,pagesize:10,searchTable:{mchId:"",mchOrderNo:"",payOrderId:"",productId:"",productType:"",status:""},payOrderId:"",mchId:"",pageTotal:null,typeBox:[{color:"blue",key:0,name:"订单生成"},{color:"orangered",key:1,name:"支付中"},{color:"green",key:2,name:"支付成功"},{color:"red",key:3,name:"支付失败"},{color:"darkgreen",key:4,name:"处理完成"},{color:"red",key:5,name:"已退款"}],detailBox:[]}},filters:{typeFilter:function(e,t){var a=t.filter((function(t){if(t.key==e)return t.name}));return a[0].name}},methods:{handleClose:function(e){this.supPassword="",e()},handleSizeChange:function(e){this.pagesize=e,this.getTableData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableData()},getDetail:function(){var e=this;this.axios({method:"post",url:"/api/pay_order/count",data:{body:{},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.loading=!1,200==t.data.code?e.detailBox=t.data.body:e.messageInfo(t)})).catch((function(e){console.log(e)}))},getTableData:function(){var e=this;this.loading=!0,this.axios({method:"post",url:"/api/pay_order/list",data:{body:{createTimeEnd:this.data[1]?this.data[1]:"",createTimeStart:this.data[0]?this.data[0]:"",mchId:this.searchTable.mchId,mchOrderNo:this.searchTable.mchOrderNo,payOrderId:this.searchTable.payOrderId,productId:this.searchTable.productId,productType:this.searchTable.productType,status:this.searchTable.status,pageIndex:this.currentPage,pageSize:this.pagesize},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.loading=!1,200==t.data.code?(e.tableData=t.data.body.payOrderLists,e.pageTotal=t.data.body.count):e.messageInfo(t)})).catch((function(e){console.log(e)}))},searchAmount:function(){this.currentPage=1,this.getTableData()},searchDetail:function(e){this.$router.push({name:"pay_order_detail",query:{id:e.payOrderId}})},order:function(e){this.payOrderId=e.payOrderId,this.orderDialog=!0},submitOrder:function(){var e=this;this.axios({method:"post",url:"/api/pay_order/reissue",data:{body:{password:this.supPassword,payOrderId:this.payOrderId},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.messageInfo(t),200==t.data.code&&(e.orderDialog=!1,e.supPassword="")})).catch((function(e){console.log(e)}))}},created:function(){this.getTableData(),this.getDetail()},mounted:function(){var e=this.$refs.table.$refs.bodyWrapper;this.mouseEventFun(e)}}),o=r,i=a("2877"),n=Object(i["a"])(o,s,l,!1,null,null,null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0b5d67.11006c62.js.map