(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5099a69f"],{"05d1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/user_list"}}},[e._v("用户列表")])],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-card",{staticClass:"box-card reset-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户列表")])]),a("p",[a("el-input",{staticStyle:{width:"205px"},attrs:{size:"small",placeholder:"用户ID","prefix-icon":"el-icon-search"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),a("el-input",{staticStyle:{width:"205px"},attrs:{size:"small",placeholder:"用户名","prefix-icon":"el-icon-search"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("el-button",{staticClass:"green",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"info"},on:{click:e.searchMchid}},[a("i",{staticClass:"el-icon-search"}),e._v(" 搜索 ")]),a("el-button",{staticClass:"green",staticStyle:{"margin-left":"10px"},attrs:{type:"success",size:"small"},on:{click:function(t){return e.$router.push("/add_user")}}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增 ")]),a("el-button",{staticClass:"red",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"info"},on:{click:e.deleteUser}},[e._v("删除")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"userId",label:"用户ID","min-width":"100"}}),a("el-table-column",{attrs:{prop:"userName",label:"用户名","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.userName)+" "),1==t.row.isSuperAdmin?a("span",{staticStyle:{position:"relative",display:"inline-block",padding:"0 6px","font-size":"12px","text-align":"center","background-color":"#FF5722",color:"#fff","border-radius":"2px"}},[e._v("超管")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"nickName",label:"用户昵称","min-width":"100"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.getLocalTime(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"商户状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticClass:"switchStyle",attrs:{"active-text":"启用","inactive-text":"关闭","active-value":1,"inactive-value":0,"active-color":"#1ab394","inactive-color":"#f56c6c",width:60},on:{change:function(a){return e.changeSwitch(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"操作","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"reset-button green",attrs:{type:"success"},on:{click:function(a){return e.rolu(t.$index,t.row)}}},[e._v("分配角色")]),a("el-button",{staticClass:"reset-button green",attrs:{type:"success"},on:{click:function(a){return e.modifyUser(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{staticClass:"reset-button red",attrs:{type:"success"},on:{click:function(a){return e.deleteCurUser(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"paginationStyle",attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"分配角色",visible:e.dialogRolu,"min-width":"250px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogRolu=t}}},[a("el-row",{attrs:{gutter:10}},e._l(e.manageMap,(function(t,s){return a("el-col",{key:s,attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-checkbox",{model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"checkedItem.checked"}},[e._v(e._s(t.roleName))])],1)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.roleSubmit}},[e._v("保存")]),a("el-button",{on:{click:function(t){e.dialogRolu=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],i=(a("4160"),a("159b"),{data:function(){return{addMec:!1,tableData:[],currentPage:1,pagesize:10,pageTotal:null,userName:"",userId:"",mchId:"",changeRolu:{},dialogRolu:!1,isAdd:"",amountTitle:"",amountDetailBox:{balance:""},selectUserList:"",manageMap:null}},methods:{deleteCurUser:function(e){this.selectUserList=e.userId+",",this.deleteUser()},deleteUser:function(){var e=this;""!=this.selectUserList?this.axios({method:"post",url:"/api/sys/user/delete",data:{body:{userIds:this.selectUserList.substring(0,this.selectUserList.length-1)},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.messageInfo(t),200==t.data.code&&e.getTableData()})).catch((function(e){console.log(e)})):this.$message({message:"请勾选需要删除的用户",type:"warning"})},handleSelectionChange:function(e){var t=this;e.length>0&&e.forEach((function(e){t.selectUserList+=e.userId+","}))},handleSizeChange:function(e){this.pagesize=e,this.getTableData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableData()},getTableData:function(){var e=this;this.loading=!0,this.axios({method:"post",url:"/api/sys/user/list",data:{body:{userId:this.userId,userName:this.userName,pageIndex:this.currentPage,pageSize:this.pagesize},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.loading=!1,200==t.data.code?(e.tableData=t.data.body.sysUserList,e.pageTotal=t.data.body.count):e.messageInfo(t)})).catch((function(e){console.log(e)}))},searchMchid:function(){this.currentPage=1,this.pagesize=10,this.getTableData()},changeSwitch:function(e){var t=this;this.axios({method:"post",url:"/api/sys/user/update",data:{body:{userId:e.userId,status:e.status},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(e){t.messageInfo(e),200==e.data.code&&t.getTableData()})).catch((function(e){console.log(e)}))},handleClose:function(e){e()},modifyUser:function(e,t){this.$router.push({name:"modify_user",query:{id:t.userId}})},searchRole:function(e){var t=this;this.userId=e.userId,this.axios({method:"post",url:"/api/sys/user/user_role_view",data:{body:{userId:e.userId},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(e){if(200==e.data.code){if(e.data.body)for(var a=0;a<e.data.body.length;a++)1==e.data.body[a].checked?e.data.body[a].checked=!0:e.data.body[a].checked=!1;t.manageMap=e.data.body}else t.messageInfo(e)})).catch((function(e){console.log(e)}))},roleSubmit:function(){for(var e=this,t="",a=0;a<this.manageMap.length;a++)1==this.manageMap[a].checked&&(t+=this.manageMap[a].roleId+",");this.axios({method:"post",url:"/api/sys/user/user_role_save",data:{body:{roleIds:t.substring(0,t.length-1),userId:this.userId},header:{token:sessionStorage.token,userName:sessionStorage.userName}}}).then((function(t){e.messageInfo(t),200==t.data.code&&(e.dialogRolu=!1,e.getTableData())})).catch((function(e){console.log(e)}))},rolu:function(e,t){this.searchRole(t),this.dialogRolu=!0}},created:function(){this.getTableData()},mounted:function(){var e=this.$refs.table.$refs.bodyWrapper;this.mouseEventFun(e)}}),n=i,r=(a("5a5c"),a("2877")),l=Object(r["a"])(n,s,o,!1,null,null,null);t["default"]=l.exports},"159b":function(e,t,a){var s=a("da84"),o=a("fdbc"),i=a("17c2"),n=a("9112");for(var r in o){var l=s[r],c=l&&l.prototype;if(c&&c.forEach!==i)try{n(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(e,t,a){"use strict";var s=a("b727").forEach,o=a("a640"),i=a("ae40"),n=o("forEach"),r=i("forEach");e.exports=n&&r?[].forEach:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,a){"use strict";var s=a("23e7"),o=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"5a5c":function(e,t,a){"use strict";var s=a("ad87"),o=a.n(s);o.a},ad87:function(e,t,a){},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-5099a69f.62ea25fb.js.map